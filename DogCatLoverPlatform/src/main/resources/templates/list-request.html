<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>View</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <link rel="stylesheet" th:href="@{../../../css/all.css}">
    <link rel="stylesheet" th:href="@{../../../css/animate.css}">

    <link rel="stylesheet" th:href="@{../../../css/bootstrap.min.css}">

    <link rel="stylesheet" th:href="@{../../../css/boxicons.min.css}">

    <link rel="stylesheet" th:href="@{../../../css/bootstrap-icons.css}">

    <link rel="stylesheet" th:href="@{../../../css/jquery-ui.css}">
    <link rel="stylesheet" th:href="@{../../../css/aos.css}">

    <link rel="stylesheet" th:href="@{../../../css/swiper-bundle.css}">

    <link rel="stylesheet" th:href="@{../../../css/nice-select.css}">

    <link rel="stylesheet" th:href="@{../../../css/magnific-popup.css}">

    <link rel="stylesheet" th:href="@{../../../css/jquery.fancybox.min.css}">

    <link rel="stylesheet" th:href="@{../../../css/odometer.css}">

    <link rel="stylesheet" th:href="@{../../../css/datepicker.min.css}">

    <link rel="stylesheet" th:href="@{../../../css/uiicss.css}">

    <link rel="stylesheet" th:href="@{../../../css/style.css}">


    <style>
        .gradient-custom-2 {
            /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
            background-image: url("../../../images/backgrounds/background_noti.jpg");
            background-size: cover;
            background-repeat: no-repeat;
        }

        .mask-custom {
            background: rgba(24, 24, 16, 0.2);
            border-radius: 2em;
            backdrop-filter: blur(25px);
            border: 2px solid rgba(255, 255, 255, 0.05);
            background-clip: padding-box;
            box-shadow: 10px 10px 10px rgba(46, 54, 68, 0.03);
        }

        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 450px;
            padding: 20px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0px 2px 5px 5px rgba(0, 0, 0, 0.1);
            margin-top: -25px;
            z-index: 999;
        }

        .popup > * {
            margin: 15px 0;
        }
    </style>

    <script>
        //Popup cho Xác nhận Request
        function showPopup(requestId) {
            var popup = document.getElementById(requestId);
            popup.style.display = 'block';
        }

        function hidePopup() {
            var popup = document.querySelector('.popup');
            popup.style.display = 'none';
        }


        //Popup cho ẩn thông báo
        function showPopup() {
            var popup = document.querySelector('.popup');
            popup.style.display = 'block';

        }

        function hidePopup() {
            var popup = document.querySelector('.popup');
            popup.style.display = 'none';
        }
    </script>

</head>


<body>
<section class="vh-100 gradient-custom-2">
    <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-md-12 col-xl-10">

                <div class="card mask-custom">
                    <div class="card-body p-4 text-white">

                        <div class="text-center pt-3 pb-2">
                            <a th:href="@{/index/home}">
                                <svg style="position: absolute; top: 12px; left: 12px;"
                                     xmlns="http://www.w3.org/2000/svg" height="2em" viewBox="0 0 512 512">
                                    <path d="M512 256A256 256 0 1 0 0 256a256 256 0 1 0 512 0zM217.4 376.9L117.5 269.8c-3.5-3.8-5.5-8.7-5.5-13.8s2-10.1 5.5-13.8l99.9-107.1c4.2-4.5 10.1-7.1 16.3-7.1c12.3 0 22.3 10 22.3 22.3l0 57.7 96 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32l-96 0 0 57.7c0 12.3-10 22.3-22.3 22.3c-6.2 0-12.1-2.6-16.3-7.1z"/>
                                </svg>
                            </a>


                            <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-todo-list/check1.webp"
                                 alt="Check" width="60">
                            <h2 class="my-4">List Request</h2>
                        </div>

                        <table class="table text-white mb-0">
                            <thead>
                            <tr>
                                <th scope="col">UserName</th>
                                <th scope="col">Blog Title</th>
                                <th scope="col">PetType</th>
                                <th scope="col">BlogType</th>
                                <th scope="col">Go to Blog</th>
                                <!--                                <th scope="col">RequestId</th>-->
                                <th scope="col">Actions</th>
                            </tr>
                            </thead>

                            <tbody>

                            <tr class="fw-normal" th:each="request : ${listBlog}">
                                <th>
                                    <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava1-bg.webp"
                                         alt="avatar 1" style="width: 45px; height: auto;">
                                    <a style="text-decoration: none; color: white;"
                                       th:href="@{'/index/profile/' + ${request.userId}}">
                                        <span class="ms-2" th:text="${request.userName}"></span>
                                    </a>

                                </th>
                                <td class="align-middle">
                                    <span th:text="${request.blogTitle}"></span>
                                </td>

                                <td class="align-middle">
                                    <span>Cat</span>
                                </td>

                                <td class="align-middle">
                                    <h6 class="mb-0" style="color: white;" th:text="${request.blogTypeName}"></h6>
                                </td>

                                <td class="align-middle">
                                    <span class="badge bg-dark"><a style="color: white; text-decoration: none;"
                                                                   th:href="@{/blog/{id}/detail(id=${request.blogId})}">Read more</a></span>
                                </td>

                                <!--                                <td class="align-middle">-->
                                <!--                                    <span th:text="${request.Id}"></span>-->
                                <!--                                </td>-->

                                <!-- Nút Check Accept-->
                                <td class="align-middle">

                                    <a th:value="${request.Id}" th:attr="data-request-id=${request.Id}"
                                       onclick="showPopup(this.getAttribute('data-request-id'))"
                                       style="cursor: pointer;">
                                        <i class="fas fa-check fa-lg text-success me-3"></i>
                                    </a>


                                    <form method="post" th:action="@{/blog/accepted-request}">
                                        <span th:id="${request.Id}" class="popup"
                                              style="color: black; font-family: var(--font-dosis)">
                                            <input type="hidden" id="requestId" name="requestId"
                                                   th:value="${request.Id}">
                                            <input type="hidden" id="currentUserId" name="currentUserId"
                                                   th:value="${currentUserId}">
                                            <input type="hidden" id="requestUserId" name="requestUserId"
                                                   th:value="${request.userId}">
                                            <input type="hidden" id="blogId" name="blogId" th:value="${request.blogId}">
                                            <h2>Are you sure about your choice?</h2>
                                            <button type="submit" class="btn btn-primary">Yes</button>
                                            <a style="cursor: pointer; font-weight: normal; font-size: 25px;"
                                               onclick="hidePopup()">Cancel</a>
                                        </span>
                                    </form>
                                </td>

                            </tr>

                            </tbody>
                        </table>


                        <!--Notification-->
                        <div class="text-center pt-3 pb-2 mt-3">
                            <svg id="svg1" xmlns="http://www.w3.org/2000/svg" height="3em" viewBox="0 0 448 512">
                                <style>#svg1 {
                                    fill: #f1f1f8
                                }</style>
                                <path d="M224 0c-17.7 0-32 14.3-32 32V51.2C119 66 64 130.6 64 208v18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416H416c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3H224 160c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"/>
                            </svg>
                            <h2 class="my-4">Notification</h2>
                        </div>

                        <table class="table text-white mb-0">
                            <thead>
                            <tr>
                                <th scope="col">Blog Title</th>
                                <th scope="col">BlogType</th>
                                <th scope="col">PetType</th>
                                <th scope="col">From User</th>
                                <th scope="col">Your Message</th>
<!--                                <th scope="col">Actions</th>-->

                            </tr>
                            </thead>

                            <tbody>

                            <tr class="fw-normal" th:each="noti : ${listNotification}">

                                <td class="align-middle">
                                    <span th:text="${noti.request.blogTitle}"></span>
                                </td>

                                <td class="align-middle">
                                    <h6 class="mb-0" style="color: white;" th:text="${noti.request.blogTypeName}"></h6>
                                </td>

                                <td class="align-middle">
                                    <span>Cat</span>
                                </td>

                                <th>
                                    <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava1-bg.webp"
                                         alt="avatar 1" style="width: 45px; height: auto;">
                                    <span class="ms-2" th:text="${noti.userName}"></span>
                                </th>

                                <td class="align-middle">
                                    <span th:text="${noti.message}"></span>
                                </td>

<!--                        &lt;!&ndash;    Hidden Notification&ndash;&gt;-->
<!--                                <td class="align-middle">-->
<!--                                    <a style="cursor: pointer"-->
<!--                                       onclick="showPopup()">-->
<!--                                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 640 512">-->
<!--                                            <path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z"/>-->
<!--                                        </svg>-->
<!--                                    </a>-->

<!--                                    <span  class="popup"-->
<!--                                          style="color: black; font-family: var(&#45;&#45;font-dosis)">-->
<!--                                            <h2>Do you want to hidden it?</h2>-->
<!--                                        <div style="display: flex; gap: 10px;">-->
<!--                                            <button type="submit" class="btn btn-primary">Yes</button>-->
<!--                                            <a style="cursor: pointer; font-weight: normal; font-size: 24px;"-->
<!--                                               onclick="hidePopup()">Cancel</a>-->
<!--                                        </div>-->

<!--                                    </span>-->
<!--                                </td>-->
<!--                                -->
<!--                            </tr>-->

                            </tbody>
                        </table>


                    </div>
                </div>

            </div>
        </div>
    </div>
</section>

<script>

</script>
</body>
</html>