<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Trash</title>
</head>
<body>
<h2>Rejected Blog</h2>
<form th:action="@{/blog/trash}" method="post">
  <table>
    <thead>
    <tr>
      <th>Title</th>
      <th>Content</th>
      <th>Reason</th>
      <th>Type</th>
      <th>Price</th>
      <th>Status</th>
      <th>Img</th>
      <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="blog, status : ${rejectBlog}">
      <td>
        <input type="text" name="title" th:value="${blog.title}" />
      </td>
      <td>
        <input type="text" name="content" th:value="${blog.content}" />
      </td>
      <td>
        <input type="text" name="reason" th:value="${blog.reason}" readonly="readonly" />
      </td>
      <td>
        <!-- Dropdown selection for "Type" -->
        <select name="blogTypeName">
          <option value="Gift" th:selected="${blog.blogTypeName == 'Gift'}">Gift</option>
          <option value="Exchange" th:selected="${blog.blogTypeName == 'Exchange'}">Exchange</option>
        </select>
      </td>
      <td>
        <input type="text" name="price" th:value="${blog.price}" />
      </td>
      <td>
        <input type="text" name="status" th:value="${blog.status}" />
      </td>
      <td>
        <img class="img-fluid" style="object-fit: contain" th:src="@{'../images/blog/' + ${blog.image}}" alt=""/>
      </td>
      <td>
        <button type="submit" name="action" value="resubmit">Update</button>
        <button type="button" th:onclick="'javascript:confirmDelete(\'' + ${blog.id} + '\')'">Delete</button>
        <input type="hidden" name="blogId" th:value="${blog.id}" />
      </td>
    </tr>
    </tbody>
  </table>
</form>

<script th:inline="javascript">
  function confirmDelete(blogId) {
    if (confirm('Are you sure you want to delete this blog?')) {
      var form = document.createElement('form');
      form.method = 'post';
      form.action = '/blog/trash';
      form.style.display = 'none';

      var input = document.createElement('input');
      input.type = 'text';
      input.name = 'action';
      input.value = 'delete';
      form.appendChild(input);

      input = document.createElement('input');
      input.type = 'text';
      input.name = 'blogId';
      input.value = blogId;
      form.appendChild(input);

      document.body.appendChild(form);
      form.submit();
    }
  }
</script>
</body>
</html>
